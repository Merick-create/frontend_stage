<header class="site-header">
  <div class="logo">TechStore</div>

  <div class="search-bar">
    
    <app-side-cart *ngIf="showSideCart" class="side-cart-panel" (close)="toggleSideCart()"></app-side-cart>
    <div class="ricercaCarrello">
      <input type="text" [(ngModel)]="searchTerm" placeholder="Cerca per nome prodotto" />
      <button (click)="searchProducts()">üîç Cerca</button>


      
      <div class="shoppingCart" (click)="toggleSideCart()">
        <div class="icon-wrapper position-relative d-flex align-items-center">
          <span class="cart-total ms-2">‚Ç¨{{ cartTotal }}</span>
          <i class="bi bi-cart fs-5"></i>

          <div class="cart-image-wrapper position-relative">
            <img src="assets/images/pippo.png" alt="Carrello" width="32" height="32" />
            <span class="badge bg-danger position-absolute top-0 start-100 translate-middle">{{ cartQuantity }}</span>
          </div>
        </div>
      </div>
    </div>
          


    <app-nav-bar></app-nav-bar>
  </div>
</header>

<app-nav-bar-tabs></app-nav-bar-tabs>
<section class="promotions-section">
  <div class="promo-main">
    <div class="promo-text">
      <p class="new-arrival">NEW ARRIVALS</p>
      <h2>4K LCD <span class="highlight">Quantum</span> Vision LCD</h2>
      <p>Limited Time: Online Only!</p>
       <button [routerLink]="['/shop']">Shop Now</button>
    </div>
    <img src="assets/images/pluto.png" alt="Promo Monitor" />
  </div>

  <div class="promo-side">
    <div class="promo-box">
      <div>
        <p>Mobile</p>
        <strong><span class="highlight">Nexus</span> Mobile Pro 256GB</strong>
        <p>Limited Time: Online Only!</p>
      </div>
      <img src="assets/images/iphone.png" alt="Phone" />
    </div>
    <div class="promo-box">
      <div>
        <p>iPadMini</p>
        <strong><span class="highlight">10 Inch</span> iPad Mini Pro</strong>
        <p>Limited Time: Online Only!</p>
      </div>
      <img src="assets/images/ipad.png" alt="Tablet" />
    </div>
  </div>
</section>

<section class="category-section">
  <h2 class="section-title">Categorie Popolari</h2>
  <div class="category-grid">
    <div class="category-card" *ngFor="let cat of categories">
      <img [src]="cat.img" [alt]="cat.name" />
      <h3>{{ cat.name }}</h3>
    </div>
  </div>
</section>

<section class="featured-products">
  <h2 class="section-title">Feature Products</h2>
  <div class="featured-container">

    <div class="special-offer-card">
      <p class="offer-label">Special Offer</p>
      <img src="assets/images/controller-rem.png" alt="Joystick" />
      <h3>Aero Control Pro Joysticks</h3>
      <p class="price">$120.00</p>
    </div>
    <div class="product-card" *ngFor="let item of products">
      <img [src]="item.img" [alt]="item.name" />
      <h3>{{ item.name }}</h3>
      <p>{{ item.description }}</p>
      <p class="old-price" *ngIf="item.price">‚Ç¨{{ item.price }}</p>
      <p class="price">‚Ç¨{{ item.price }}</p>
      <button class="add-btn" (click)="addToCart(item)">Add To Cart</button>
    </div>

  </div>
</section>

<main class="product-section">
  <h1 class="section-title">Prodotti Disponibili</h1>

  <div class="product-grid">
    <div
      class="product-card"
      *ngFor="let prod of products"
      [routerLink]="['/details', prod.id]"
      style="cursor: pointer;"
    >
      <img [src]="prod.img" alt="{{ prod.name }}" />
      <h2>{{ prod.name }}</h2>
      <p>{{ prod.description }}</p>
      <strong>{{ prod.price | currency: 'EUR' }}</strong>
    </div>
  </div>
</main>
<button 
  *ngIf="isAdmin"
  class="floating-add-button"
  (click)="showModal = true"
>
  +
</button>
<div *ngIf="showModal" class="modal-backdrop" (click)="closeModal($event)">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <span class="close-btn" (click)="showModal = false">&times;</span>
    <h3>Aggiungi Prodotto</h3>

    <input type="text" placeholder="Nome" [(ngModel)]="newProduct.name" />
    <input type="text" placeholder="Categoria" [(ngModel)]="newProduct.id_categoria" />
    <input type="number" placeholder="Prezzo" [(ngModel)]="newProduct.price" />
    <input type="text" placeholder="Descrizione" [(ngModel)]="newProduct.description" />
    <input type="number" placeholder="Quantit√†" [(ngModel)]="newProduct.quantity" />
    <input type="text" placeholder="URL Immagine" [(ngModel)]="newProduct.img" />

    <button (click)="addProduct()">Aggiungi</button>
  </div>
</div>
